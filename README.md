# al-loan

# 常见贷款方式计算
> 常见贷款方式分等额本息和等额本金两种计算法

# 名词解释
- 贷款=loan
- 本金=Principal
- 利息=Interest
- 罚息=overdueFee
- 担保费=guaranteeFee
- 利率=rate
- 逾期=overdue
- 违约金=breachFee
- 滞纳金=lateFee
- 到期还款日=dayOfMonthRepay
- 宽限期=dayOfGrace
- 代偿期=dayOfCompensation

# 贷款还款计算规则
- 资方角度
    - 到期还款日之前还本金+利息，无罚息
    - 到期还款日之后且宽限期内还本金+利息，产生罚息，但不收取
    - 到期还款日之后且宽限期后还款，配账罚息+利息+本金，直至当期还清为止
    - 罚息利率看资方约定，罚息=当期未还本金部分*罚息日利率
- 担保方角度
    - 到期还款日之前还本金+利息+担保费，无罚息
    - 到期还款日之后且宽限期内还本金+利息+担保费，产生罚息，产生担保违约金，但不收取
    - 到期还款日之后且宽限期后还款，配账罚息+利息+本金+违约金+担保费，直至当期还清为止
    - 罚息利率看资方约定，罚息=当期未还本金部分*罚息日利率，从资方同步
    - 违约金利率看担保方约定，违约金=当前未还本金部分*违约金日利率
    - 超过代偿期后，担保方发起当期代偿，替客户偿还资方的罚息+利息+本金，同时开始征收期款滞纳金(=代偿本金 * 代偿滞纳天数 * 代偿滞纳金日利率)，代偿后客户还欠担保费+违约金
    - 代偿后，客户还款应该按期次由远到近，第一期的还清了，才还第二期。每一期里才按照会计科目分优先级
    - 存在代偿期次之后，客户还款配账，当期代偿后=期款滞纳金+代偿罚息+代偿利息+违约金+担保费+代偿本金
    - 客户出现连续3次逾期或者累积6次逾期，则超过代偿期后，担保方发起整笔贷款代偿：
        - 代偿客户当期的本金+剩余期次的所有本金
        - 代偿客户当期的利息+未来剩余本金的计提利息
        - 代偿客户当期的罚息
        - 代偿客户当期的担保费+剩余期次的所有担保费
        - 代偿客户当期的违约金
        - 开始征收贷款滞纳金=[(上期期款滞纳金+上期代偿罚息+上期代偿利息+上期代偿本金)按时间由远到近+(整笔代偿本金+整笔代偿罚息+整笔代偿利息+整笔代偿担保费+整笔代偿违约金)]*贷款滞纳金日利率
        - 客户还款时配账：
            1. 贷款滞纳金
            2. 期款滞纳金(不再滚了)
            3. 代偿罚息
            4. 代偿利息
            5. 代偿违约金(不再滚了)
            6. 代偿担保费
            7. 代偿本金
    - 总之，每期都有固定的本金+利息+担保费，逾期后，罚息和违约金会按天滚，终结他们按天滚的是期款滞纳金，终结期款滞纳金按天滚的是贷款滞纳金。